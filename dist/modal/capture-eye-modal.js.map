{"version":3,"file":"capture-eye-modal.js","sourceRoot":"","sources":["../../src/modal/capture-eye-modal.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html } from 'lit';\nimport { customElement, property, state, query } from 'lit/decorators.js';\nimport { getModalStyles } from './modal-styles.js';\nimport { Constant } from '../constant.js';\n\nfunction formatTxHash(txHash: string): string {\n  if (txHash.length < 8) {\n    return '';\n  }\n  const firstPart = txHash.slice(0, 4);\n  const lastPart = txHash.slice(-4);\n  return `${firstPart}...${lastPart}`;\n}\n\n@customElement('capture-eye-modal')\nexport class CaptureEyeModal extends LitElement {\n  static override styles = getModalStyles();\n\n  @property({ type: String })\n  nid = '';\n\n  @property({ type: String })\n  layout = Constant.layout.original;\n\n  @property({ type: Boolean })\n  modalHidden = true;\n\n  @state() creatorName = Constant.text.loading;\n  @state() date = Constant.text.loading;\n  @state() abstract = Constant.text.loading;\n  @state() blockchain = Constant.text.loading;\n  @state() transaction = Constant.text.loading;\n  @state() thumbnailUrl = '';\n  @state() explorerUrl = '';\n  @state() assetSourceType = Constant.text.loading;\n  @state() captureTime = Constant.text.loading;\n  @state() backendOwnerName = Constant.text.loading;\n  @state() usedBy = Constant.text.loading;\n  @state() bannerImageSrc = '';\n  @state() bannerLink = '';\n  @state() imageLoaded = false;\n\n  @query('.modal') modalElement!: HTMLDivElement;\n\n  constructor() {\n    super();\n  }\n\n  resetModalProps() {\n    this.creatorName = Constant.text.loading;\n    this.date = Constant.text.loading;\n    this.abstract = Constant.text.loading;\n    this.blockchain = Constant.text.loading;\n    this.transaction = Constant.text.loading;\n    this.thumbnailUrl = '';\n    this.explorerUrl = '';\n    this.bannerImageSrc = '';\n    this.bannerLink = '';\n    this.imageLoaded = false;\n  }\n\n  override firstUpdated() {\n    this.updateModalVisibility();\n  }\n\n  override updated(changedProperties: Map<string | number | symbol, unknown>) {\n    if (changedProperties.has('modalHidden')) {\n      this.updateModalVisibility();\n    }\n  }\n\n  private updateModalVisibility() {\n    const modalElement = this.shadowRoot?.querySelector('.modal');\n    if (modalElement) {\n      if (this.modalHidden) {\n        modalElement.classList.add('modal-hidden');\n        modalElement.classList.remove('modal-visible');\n      } else {\n        modalElement.classList.remove('modal-hidden');\n        modalElement.classList.add('modal-visible');\n      }\n    }\n  }\n\n  private isOriginal() {\n    return this.layout == Constant.layout.original;\n  }\n\n  private renderTop() {\n    const imgSrc = this.thumbnailUrl\n      ? this.thumbnailUrl\n      : 'https://via.placeholder.com/100';\n    const name = this.isOriginal() ? this.creatorName : this.assetSourceType;\n    const date = this.isOriginal() ? this.date : this.captureTime;\n    return html`\n      <div class=\"section-title\">Produced by</div>\n      <div class=\"profile-container\">\n        ${this.thumbnailUrl\n          ? html`<img src=${imgSrc} alt=\"Profile\" class=\"profile-img\" />`\n          : html`<div class=\"shimmer-profile-img\"></div>`}\n        <div class=\"profile-text\">\n          <div class=\"top-name\">\n            ${name !== Constant.text.loading\n              ? name\n              : html`<div class=\"shimmer-text\"></div>`}\n          </div>\n          <div class=\"top-date\">\n            ${date !== Constant.text.loading\n              ? date\n              : html`<div class=\"shimmer-text\"></div>`}\n          </div>\n        </div>\n      </div>\n      <div class=\"abstract\">\n        ${this.abstract !== Constant.text.loading\n          ? this.abstract\n          : html`<div class=\"shimmer-text\"></div>`}\n      </div>\n      <hr />\n    `;\n  }\n\n  private renderMiddle() {\n    const formattedTransaction = formatTxHash(this.transaction);\n    return html`\n      <div class=\"section-title\">\n        ${this.isOriginal() ? 'Origins' : 'Curated By'}\n      </div>\n      ${this.isOriginal()\n        ? html`<p>\n              ${this.blockchain !== Constant.text.loading\n                ? `Blockchain: ${this.blockchain}`\n                : html`<div class=\"shimmer-text\"></div>`}\n            </p>\n            <span>Transaction:</span>\n            ${formattedTransaction\n              ? html`<a href=${this.explorerUrl} target=\"_blank\"\n                  >${formatTxHash(this.transaction)}</a\n                >`\n              : html`<span\n                  >${this.transaction !== Constant.text.loading\n                    ? 'N/A'\n                    : html`<div class=\"shimmer-text\"></div>`}</span\n                >`}`\n        : html`<p>\n            ${this.backendOwnerName !== Constant.text.loading\n              ? this.backendOwnerName\n              : html`<div class=\"shimmer-text\"></div>`}\n          </p>`}\n      <hr />\n    `;\n  }\n\n  private renderBottom() {\n    const viewMoreUrl = this.isOriginal()\n      ? `${Constant.url.profile}/${this.nid}`\n      : this.usedBy;\n    return html`\n      <a href=${viewMoreUrl} target=\"_blank\"\n        ><button class=\"view-more-btn\">View More</button></a\n      >\n      <div class=\"powered-by\">\n        ${this.usedBy !== Constant.text.loading\n          ? 'Powered by Numbers Protocol'\n          : html`<div class=\"shimmer-text\"></div>`}\n      </div>\n    `;\n  }\n\n  private handleImageLoad() {\n    this.imageLoaded = true;\n  }\n\n  override render() {\n    return html`\n      <div class=\"modal ${this.modalHidden ? 'modal-hidden' : 'modal-visible'}\">\n        <div class=\"modal-container\">\n          <div class=\"modal-content\">\n            <div class=\"card\">\n              ${this.renderTop()} ${this.renderMiddle()} ${this.renderBottom()}\n            </div>\n          </div>\n          ${this.bannerLink && this.bannerImageSrc\n            ? html`<a href=${this.bannerLink} target=\"_blank\">\n                <img\n                  src=${this.bannerImageSrc}\n                  alt=\"Full width\"\n                  class=\"full-width-img\"\n                  @load=${this.handleImageLoad}\n                  style=\"display: ${this.imageLoaded ? 'block' : 'none'}\"\n                />\n                ${!this.imageLoaded\n                  ? html`<div class=\"shimmer full-width-img\"></div>`\n                  : ''}\n              </a>`\n            : html`<div class=\"shimmer full-width-img\"></div>`}\n        </div>\n      </div>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'capture-eye-modal': CaptureEyeModal;\n  }\n}\n"]}